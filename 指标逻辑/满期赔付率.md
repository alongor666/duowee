# 📌 满期赔付率 | `expired_loss_ratio`

---

## 1. 指标定义
- **字段名**：`expired_loss_ratio`  
- **单位**：小数  
- **类型（DB 存储）**：`numeric(10,6)`（以小数形式存储，如 0.6534）  
- **展示精度**：保留 1 位小数  
- **含义**：在统计期内，累计**满期净保费**对应的实际赔付水平。衡量公司承保业务在已承担责任范围内的风险成本，反映盈利能力与风险控制效果。  

---

## 2. 计算公式（公司口径）
表格中已直接提供 `expired_loss_ratio`，可直接取值；同时可用以下公式进行校核：  

```text
满期赔付率 (expired_loss_ratio) = 
    ( SUM(total_claim_payment_in_10k) ÷ SUM(expired_net_premium_in_10k) )

	•	total_claim_payment_in_10k：累计总赔款，万元
	•	expired_net_premium_in_10k：累计满期净保费，万元

⸻

3. 计算顺序
	1.	聚合绝对值：
	•	sum_claim_payment = Σ(total_claim_payment_in_10k)
	•	sum_expired_premium = Σ(expired_net_premium_in_10k)
	2.	计算比率：
	•	loss_ratio = sum_claim_payment / sum_expired_premium
	3.	存储口径：小数（如 0.5521）；报表展示时 ROUND(loss_ratio, 4)，即小数保留 4 位小数。

⸻

4. 注意事项
	•	分母为满期净保费，不可误用 documented_premium_in_10k。
	•	数据完整性：确保 total_claim_payment_in_10k 已包含所有已决赔款，且无重复或缺漏。
	•	边界条件：若 expired_net_premium_in_10k=0，则结果应为 NULL 或 0，避免除零错误。
	•	关系验证：
	•	与 claim_frequency（满期出险率）趋势一致，但数值口径不同；
	•	与 marginal_contribution_ratio、variable_cost_ratio 有直接计算关系。

⸻

5. 实现示例（Postgres / Supabase SQL）

WITH base AS (
  SELECT
    policy_start_year,
    week_number,
    third_level_organization,
    SUM(total_claim_payment_in_10k) AS sum_claim_payment,
    SUM(expired_net_premium_in_10k) AS sum_expired_premium
  FROM auto_insurance_metrics
  GROUP BY 1,2,3
)
SELECT
  policy_start_year,
  week_number,
  third_level_organization,
  CASE 
    WHEN sum_expired_premium > 0
      THEN ROUND((sum_claim_payment / sum_expired_premium), 4)
    ELSE NULL
  END AS expired_loss_ratio
FROM base
ORDER BY policy_start_year, week_number, third_level_organization;


⸻

6. 口径说明
	•	公司口径：满期赔付率 = 总赔款（万元） ÷ 满期净保费（万元）。
	•	行业对比：与监管报表中的“赔付率（已赚保费口径）”定义一致，能衡量已承担风险部分的真实赔付水平。